{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/index.js","src/utils.js"],"names":["f","exports","module","define","amd","window","global","self","this","Flowly","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_utils","elem","options","arguments","undefined","_classCallCheck","app","document","querySelector","rect","getBoundingClientRect","opts","Object","assign","_defaultOptions","style","position","overflow","texts","Map","text","_this","_createText","appendChild","effect","direction","left","width","top","rand","height","clientHeight","clientWidth","timing","iterations","duration","offsetWidth","easing","token","randomStr","set","animate","onfinish","removeChild","delete","flag","show","hide","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","values","Symbol","iterator","next","done","value","display","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","console","log","color","shadow","size","weight","createElement","className","fontSize","fontWeight","textShadow","whiteSpace","zIndex","innerText","body","min","max","Math","floor","random","toString"],"mappings":"CAAA,SAAAA,GAAA,GAAA,iBAAAC,SAAA,oBAAAC,OAAAA,OAAAD,QAAAD,SAAA,GAAA,mBAAAG,QAAAA,OAAAC,IAAAD,UAAAH,OAAA,EAAA,oBAAAK,OAAAA,OAAA,oBAAAC,OAAAA,OAAA,oBAAAC,KAAAA,KAAAC,MAAAC,OAAAT,KAAA,CAAA,WAAA,OAAA,SAAAU,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAf,EAAA,IAAAoB,MAAA,uBAAAL,EAAA,KAAA,MAAAf,EAAAqB,KAAA,mBAAArB,EAAA,IAAAsB,EAAAV,EAAAG,IAAAd,YAAAU,EAAAI,GAAA,GAAAQ,KAAAD,EAAArB,QAAA,SAAAS,GAAA,IAAAE,EAAAD,EAAAI,GAAA,GAAAL,GAAA,OAAAI,EAAAF,GAAAF,IAAAY,EAAAA,EAAArB,QAAAS,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAd,QAAA,IAAA,IAAAkB,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,EAAAW,GAAA,SAAAP,EAAAhB,EAAAD,uWCAAyB,EAAAR,EAAA,WAEMT,aACJ,SAAAA,EAAYkB,GAAoB,IAAdC,EAAcC,UAAAL,OAAA,QAAAM,IAAAD,UAAA,GAAAA,UAAA,MAAAE,EAAAvB,KAAAC,GAC9BD,KAAKwB,IAAMC,SAASC,cAAcP,GAClCnB,KAAK2B,KAAO3B,KAAKwB,IAAII,wBACrB5B,KAAK6B,KAAOC,OAAOC,OAAO/B,KAAKgC,kBAAmBZ,GAElDpB,KAAKwB,IAAIS,MAAMC,SAAW,WAC1BlC,KAAKwB,IAAIS,MAAME,SAAW,SAC1BnC,KAAKoC,MAAQ,IAAIC,8CAGXC,GAAM,IAAAC,EAAAvC,KACNG,EAAIH,KAAKwC,YAAYF,GAC3BtC,KAAKwB,IAAIiB,YAAYtC,GAErB,IAAIuC,OAAA,EACwB,eAAxB1C,KAAK6B,KAAKc,WACZxC,EAAE8B,MAAMW,KAAU5C,KAAK2B,KAAKiB,KAAO5C,KAAK2B,KAAKkB,MAA7C,KACA1C,EAAE8B,MAAMa,KAAO,EAAA5B,EAAA6B,MAAK,EAAG/C,KAAK2B,KAAKqB,OAAS7C,EAAE8C,cAAgB,KAC5DP,IACEE,KAAS5C,KAAK2B,KAAKkB,MAAnB,OAEAD,MAAUzC,EAAE+C,YAAZ,QAE+B,aAAxBlD,KAAK6B,KAAKc,YACnBxC,EAAE8B,MAAMW,MAAO,EAAA1B,EAAA6B,MAAK,EAAG/C,KAAK2B,KAAKkB,MAAQ1C,EAAE+C,aAAe,KAC1D/C,EAAE8B,MAAMa,KAAW3C,EAAE8C,aAArB,KACAP,IACEI,KAAS3C,EAAE8C,aAAX,OAEAH,IAAQ9C,KAAK2B,KAAKqB,OAAlB,QAIJ,IAAIG,KACJA,EAAOC,WAAa,EACpBD,EAAOE,UAAYf,EAAKe,UAAYrD,KAAK6B,KAAKwB,WAAarD,KAAKwB,IAAI0B,YAAc/C,EAAEmD,aAAetD,KAAKwB,IAAI0B,YAC5GC,EAAOI,OAASjB,EAAKiB,QAAUvD,KAAK6B,KAAK0B,OAEzC,IAAMC,GAAQ,EAAAtC,EAAAuC,aACdzD,KAAKoC,MAAMsB,IAAIF,EAAOrD,GAEtBA,EAAEwD,QAAQjB,EAAQS,GAAQS,SAAW,WACnCrB,EAAKf,IAAIqC,YAAY1D,GACrBoC,EAAKH,MAAM0B,OAAON,mCAKfO,GACDA,EAAM/D,KAAKgE,OACVhE,KAAKiE,sCAGL,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAA9C,EAAA,IACL,IAAA,IAAA+C,EAAAC,EAAiBtE,KAAKoC,MAAMmC,SAA5BC,OAAAC,cAAAP,GAAAG,EAAAC,EAAAI,QAAAC,MAAAT,GAAA,EAAsCG,EAAAO,MAC/B3C,MAAM4C,QAAU,OAFlB,MAAAC,GAAAX,GAAA,EAAAC,EAAAU,EAAA,QAAA,KAAAZ,GAAAI,EAAAS,QAAAT,EAAAS,SAAA,QAAA,GAAAZ,EAAA,MAAAC,mCAMA,IAAAY,GAAA,EAAAC,GAAA,EAAAC,OAAA5D,EAAA,IACL,IAAA,IAAA6D,EAAAC,EAAiBpF,KAAKoC,MAAMmC,SAA5BC,OAAAC,cAAAO,GAAAG,EAAAC,EAAAV,QAAAC,MAAAK,GAAA,EAAsCG,EAAAP,MAC/B3C,MAAM4C,QAAU,QAFlB,MAAAC,GAAAG,GAAA,EAAAC,EAAAJ,EAAA,QAAA,KAAAE,GAAAI,EAAAL,QAAAK,EAAAL,SAAA,QAAA,GAAAE,EAAA,MAAAC,qCAMc,IAAd9D,EAAcC,UAAAL,OAAA,QAAAM,IAAAD,UAAA,GAAAA,UAAA,MACnBgE,QAAQC,IAAIlE,GACZpB,KAAK6B,KAAOC,OAAOC,OAAO/B,KAAK6B,KAAMT,uCAG3BkB,GACV,IAAMiD,EAASjD,EAAKiD,OAAUvF,KAAK6B,KAAKS,KAAKiD,MACvCC,EAASlD,EAAKkD,QAAUxF,KAAK6B,KAAKS,KAAKkD,OACvCC,EAASnD,EAAKmD,MAAUzF,KAAK6B,KAAKS,KAAKmD,KACvCC,EAASpD,EAAKoD,QAAU1F,KAAK6B,KAAKS,KAAKoD,OACvCvF,EAAIsB,SAASkE,cAAc,QAajC,OAXAxF,EAAEyF,UAAmBtD,EAAKsD,WAAa5F,KAAK6B,KAAKS,KAAKsD,UACtDzF,EAAE8B,MAAMC,SAAa,WACrB/B,EAAE8B,MAAM4D,SAAaJ,EAAO,KAC5BtF,EAAE8B,MAAM6D,WAAaJ,EACrBvF,EAAE8B,MAAMsD,MAAaA,EACrBpF,EAAE8B,MAAM8D,WAAR,iBAAsCP,EAAtC,kBAA8DA,EAA9D,kBAAsFA,EAAtF,iBAA6GA,EAC7GrF,EAAE8B,MAAM+D,WAAahG,KAAK6B,KAAKS,KAAK0D,WACpC7F,EAAE8B,MAAMgE,OAAajG,KAAK6B,KAAKS,KAAK2D,OAEpC9F,EAAE+F,UAAY5D,EAAK6D,KAEZhG,4CAIP,OACEmC,MACEoD,OAAQ,OACRD,KAAQ,GACRF,MAAQ,OACRC,OAAQ,OACRI,UAAW,cACXI,WAAY,SACZC,OAAQ,YAEV5C,SAAU,IACVE,OAAQ,SACRZ,UAAW,uBAKjBjD,EAAOD,QAAUQ,kDCnGjBP,EAAOD,SACLsD,KAdW,SAACqD,EAAKC,GACjB,OAAOC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,GAAOA,IAchD3C,UAXgB,WAEhB,IAAK,IAFYzC,EAAgBK,UAAAL,OAAA,QAAAM,IAAAD,UAAA,GAAAA,UAAA,GAAP,GACtBf,EAAI,GACCK,EAAI,EAAGA,EAAIK,EAAQL,IAAK,CAC/B,IAAM6F,EAAyB,GAAhBF,KAAKE,SAAgB,EACpClG,IAAW,IAALK,EAAU,EAAU,IAALA,EAAoB,EAAT6F,EAAa,EAAKA,GAASC,SAAS,IAEtE,OAAOnG","file":"flowly.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import { rand, randomStr } from './utils'\n\nclass Flowly {\n  constructor(elem, options = {}) {\n    this.app = document.querySelector(elem)\n    this.rect = this.app.getBoundingClientRect()\n    this.opts = Object.assign(this._defaultOptions(), options)\n\n    this.app.style.position = 'relative'\n    this.app.style.overflow = 'hidden'\n    this.texts = new Map()\n  }\n\n  addText(text) {\n    const t = this._createText(text)\n    this.app.appendChild(t)\n\n    let effect\n    if (this.opts.direction === 'horizontal') {\n      t.style.left = `${this.rect.left + this.rect.width}px`\n      t.style.top  = rand(0, this.rect.height - t.clientHeight) + 'px'\n      effect = [{\n        left: `${this.rect.width}px`\n      }, {\n        left: `${-t.clientWidth}px`\n      }]\n    } else if (this.opts.direction === 'vertical') {\n      t.style.left = rand(0, this.rect.width - t.clientWidth) + 'px'\n      t.style.top  = `${-t.clientHeight}px`\n      effect = [{\n        top: `${-t.clientHeight}px`,\n      }, {\n        top: `${this.rect.height}px`\n      }]\n    }\n\n    let timing = {}\n    timing.iterations = 1\n    timing.duration = (text.duration || this.opts.duration) * (this.app.clientWidth + t.offsetWidth) / this.app.clientWidth\n    timing.easing = text.easing || this.opts.easing\n\n    const token = randomStr()\n    this.texts.set(token, t)\n\n    t.animate(effect, timing).onfinish = () => {\n      this.app.removeChild(t)\n      this.texts.delete(token)\n    }\n  }\n\n  // if true show text, if false hide text\n  toggle(flag) {\n    if (flag) this.show()\n    else this.hide()\n  }\n\n  hide() {\n    for (let text of this.texts.values()) {\n      text.style.display = 'none'\n    }\n  }\n\n  show() {\n    for (let text of this.texts.values()) {\n      text.style.display = 'block'\n    }\n  }\n\n  update(options = {}) {\n    console.log(options)\n    this.opts = Object.assign(this.opts, options)\n  }\n\n  _createText(text) {\n    const color  = text.color  || this.opts.text.color\n    const shadow = text.shadow || this.opts.text.shadow\n    const size   = text.size   || this.opts.text.size\n    const weight = text.weight || this.opts.text.weight\n    const t = document.createElement('span')\n\n    t.className        = text.className || this.opts.text.className\n    t.style.position   = 'absolute'\n    t.style.fontSize   = size + 'px'\n    t.style.fontWeight = weight\n    t.style.color      = color\n    t.style.textShadow = `-2px -2px 0px ${shadow}, -2px 2px 0px ${shadow}, 2px -2px 0px ${shadow}, 2px 2px 0px ${shadow}`\n    t.style.whiteSpace = this.opts.text.whiteSpace\n    t.style.zIndex     = this.opts.text.zIndex\n\n    t.innerText = text.body\n\n    return t\n  }\n\n  _defaultOptions() {\n    return {\n      text: {\n        weight: 'bold',\n        size  : 56,\n        color : '#000',\n        shadow: '#fff',\n        className: 'flowly-text',\n        whiteSpace: 'nowrap' || 'pre',\n        zIndex: 2147483647,\n      },\n      duration: 2000,\n      easing: 'linear',\n      direction: 'horizontal',\n    }\n  }\n}\n\nmodule.exports = Flowly\n","const rand = (min, max) => {\n  return Math.floor(Math.random() * (max - min) + min)\n}\n\nconst randomStr = (length = 32) => {\n  let s = ''\n  for (let i = 0; i < length; i++) {\n    const random = Math.random() * 16 | 0\n    s += (i == 12 ? 4 : (i == 16 ? (random & 3 | 8) : random)).toString(16)\n  }\n  return s\n}\n\nmodule.exports = {\n  rand,\n  randomStr\n}\n"]}